<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #0e1621; color: white; font-family: sans-serif; margin: 0; padding: 20px; }
        .header { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
        .back-btn { color: white; font-size: 20px; text-decoration: none; }
        
        .l-card { background: #17212b; padding: 12px; border-radius: 15px; display: flex; align-items: center; gap: 12px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); text-decoration: none; color: white; }
        .rank { width: 30px; height: 30px; border-radius: 50%; background: #3390ec; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; }
        .l-img { width: 45px; height: 45px; border-radius: 12px; }
        .l-info { flex: 1; }
        .l-info b { font-size: 15px; display: block; }
        .l-info span { font-size: 12px; color: #4caf50; }
    </style>
</head>
<body>

    <div class="header">
        <a href="profile.html" class="back-btn"><i class="fas fa-arrow-left"></i></a>
        <h2 style="margin: 0;">Top Leaderboard</h2>
    </div>

    <div id="lList">লোড হচ্ছে...</div>

    <script>
        const SB_URL = "https://detrmszrwyolybdecqxn.supabase.co"; 
        const SB_KEY = "sb_publishable_mi0X-fBPpa1-EPd8AkEdgQ_n3d4nr2F"; 
        const _supabase = supabase.createClient(SB_URL, SB_KEY);

        async function load() {
            const { data } = await _supabase.from('posts').select('*').eq('type', 'trust').order('upvotes', { ascending: false });
            let html = "";
            data.forEach((item, i) => {
                html += `
                    <a href="https://t.me/${item.tg_id.replace('@','')}" class="l-card">
                        <div class="rank">${i+1}</div>
                        <img class="l-img" src="${item.image_url || 'https://ui-avatars.com/api/?name='+item.name}">
                        <div class="l-info">
                            <b>${item.name}</b>
                            <span>${item.upvotes || 0} Up Ratings</span>
                        </div>
                        <i class="fab fa-telegram-plane" style="color:#3390ec"></i>
                    </a>`;
            });
            document.getElementById('lList').innerHTML = html || "No Data";
        }
        load();
    </script>
</body>
</html>
